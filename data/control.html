<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" >

  
    <style>

        html {
            font-family: Arial;
            display: inline-block;
            margin: 0px auto;
            text-align: left;
               background-color:LightSlateGray;
        }
        h2 { font-size: 3.0rem; }
        p { font-size: 3.0rem; }
        .units { font-size: 1.2rem; }
        .sensors-labels{
            font-size: 1.5rem;
            vertical-align:middle;
            padding-bottom: 15px;
        }
        div {
            max-width : 500px;
            word-wrap: break-word;
        }
        .grid-container {
            display: grid;
            grid-template-columns: auto auto;
            background-color: #2196F3;
            padding: 10px;
        }
        .grid-item {
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.8);
            padding: 20px;
            font-size: 30px;
            text-align: center;
        }
    </style>
    <title>ESP32</title>
</head>
<body>
    <h1>ESP32</h1>
   <h3> mode : Manual </h3>
    <form action="/mode" method="get"  >
        <input type="submit" value="Change to automatic mode"/>
    </form>
<form accept-charset="UTF-8" action="/command"  >
   <h4> COOLER </h4>
	<label for="cooler">Cooler</label><br /> 
	<input checked="checked" name="cooler" type="radio" value="50" /> On <br /> 
	<input name="cooler" type="radio" value="0" /> Off <br />  
   <label for="fan-speed">Fan speed </label><br /> 
   <input type="range" name="fan-speed" min="1" max="100" value="50"><br/>

   <h4> HEATER </h4>
	<input checked="checked" name="heater" type="radio" value="1" /> On <br /> 
	<input name="heater" type="radio" value="0" /> Off <br />  




	<button type="submit" value="Submit">Envoyer</button>
</form>
    <h3>Object status :</h3>
    Uptime
    : %UPTIME% s<br/>
    Where
    : %WHERE% s<br/>
    <h3>Network
    link status :</h3>
    WiFi SSID
    : %SSID%<br/>
    MAC address
    : %MAC%<br/>
    IP address
    : %IP%<br/>
    <h3>Sensors
    status :</h3>
    Temperature
    : %TEMPERATURE% C<br/>
    Light
    : %LIGHT% Lumen<br/>
    Cooler
    : %COOLER%<br/>
    Heater
    : %HEATER%<br/>
    <h3>Sensors status WITH GLYPHS :</h3>
    <div class="grid-container">
        <div class="grid-item">
            <i class="fas fa-thermometer-half" style="color:#059e8a;"></i>
        </div>
        <div class="grid-item">
            <span class="sensors-labels">Temperature</span>
            <span id="temperature">%TEMPERATURE%</span>
            <sup class="units">&deg;C</sup>
        </div>
        <div class="grid-item">
            <i class="far fa-lightbulb" style="color:#00add6;"></i>
        </div>
        <div class="grid-item">
            <span class="sensors-labels">Light</span>
            <span id="light">%LIGHT%</span>
            <sup class="units">Lumen</sup>
        </div>
    </div>
    <script>
        setInterval(function ( ) {
var xhr = new XMLHttpRequest(); // Constructor
// XMLHttpRequest changes between states as it progresses
xhr.onreadystatechange = function() { // Handler to track XMLHttp object state
// DONE = 4; when request complete and return OK (200)
if (this.readyState == 4 && this.status == 200) {
var r = this.response //renvoie le texte reÃ§u d'un serveur suite Ã l'envoi//console.log(r);
// .innerHTML method is used to change the html contents of a DOM object
document.getElementById("temperature").innerHTML = r; // temperature
}
};
xhr.open("GET", "/temperature", true); // true => asynchrone open call,
//Contrary to its name, does not open the connection. It
//only configures the request, but the network activity only
//starts with the call of send.
xhr.send(); //This method opens the connection and sends the request to server.
}, 1000 ) ;
        setInterval(function ( ) {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("light").innerHTML = this.responseText;
                }
            };
            xhr.open("GET", "/light", true);
            xhr.send();
        }, 1000 ) ;
    </script>
    <h3>Thresholds :</h3>
    Day/Night Light
    : %LT% Lumen<br/>
    Day
    - Low Temp : %SBJ% C<br/>
    Day
    - High Temp : %SHJ% C<br/>
    Night - Low Temp : %SBN% C<br/>
    Night - Low Temp : %SHN% C<br/>
    <h3> Periodic sensor data sent to :</h3>
    <form action="/target" method="post">
        <label for="ip">IP Address :</label>
        <input type="text" name="ip" placeholder="%PRT_IP%"/><br/>
        <label for="port">Port :</label>
        <input type="text" name="port" placeholder="%PRT_PORT%"/><br/>
        <label for="sp"> Sampling Period (in seconds) :</label>
        <input type="text" name="sp" placeholder="%PRT_T%"/><br/>
        <input type="submit" value="Change reporting host !"/>
    </form>
</body>
</html>

